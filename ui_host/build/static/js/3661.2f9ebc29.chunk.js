/*! For license information please see 3661.2f9ebc29.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_datalayer_examples_jupyter_react_cra=self.webpackChunk_datalayer_examples_jupyter_react_cra||[]).push([[3661],{22787:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseManager=void 0;const s=n(5233),i=n(10336);t.BaseManager=class BaseManager{constructor(e){var t;this._isDisposed=!1,this._disposed=new s.Signal(this),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get isActive(){return!0}dispose(){this.isDisposed||(this._disposed.emit(void 0),s.Signal.clearData(this))}}},79779:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BuildManager=void 0;const s=n(19430),i=n(10336);t.BuildManager=class BuildManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this._url="",this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();const{baseUrl:n,appUrl:r}=this.serverSettings;this._url=s.URLExt.join(n,r,"api/build")}get isAvailable(){return"true"===s.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===s.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new i.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e}))}build(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new i.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const t="Build failed with ".concat(e.status,".\n\n        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').\n\n        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.");throw new i.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new i.ServerConnection.ResponseError(e)}))}}},30610:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigWithDefaults=t.ConfigSection=void 0;const i=n(19430),r=n(51);!function(e){e.create=function create(e){const t=new DefaultConfigSection(e);return t.load().then((()=>t))}}(t.ConfigSection||(t.ConfigSection={}));class DefaultConfigSection{constructor(e){var t;this._url="unknown";const n=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings();this._url=i.URLExt.join(n.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await r.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status){throw await r.ServerConnection.ResponseError.create(e)}this._data=await e.json()}async update(e){this._data=s(s({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)},n=await r.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status){throw await r.ServerConnection.ResponseError.create(n)}return this._data=await n.json(),this._data}}t.ConfigWithDefaults=class ConfigWithDefaults{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};if(n[e]=t,this._className){const e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}},66414:function(e,t,n){var s=n(12897).default,i=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Drive=t.ContentsManager=t.Contents=void 0;const a=n(19430),l=n(5233),c=n(51),d=o(n(56730));var u;!function(e){e.validateContentsModel=function validateContentsModel(e){d.validateContentsModel(e)},e.validateCheckpointModel=function validateCheckpointModel(e){d.validateCheckpointModel(e)}}(t.Contents||(t.Contents={}));t.ContentsManager=class ContentsManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new l.Signal(this);const s=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:c.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new Drive({serverSettings:s}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,l.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getSharedModelFactory(e){var t;const[n]=this._driveForPath(e);return null!==(t=null==n?void 0:n.sharedModelFactory)&&void 0!==t?t:null}localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?a.PathExt.join(n.slice(1).join(":"),...t.slice(1)):a.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?a.PathExt.normalize(e):"".concat(t[0],":").concat(a.PathExt.normalize(t.slice(1).join(":")))}resolvePath(e,t){const n=this.driveName(e),s=this.localPath(e),i=a.PathExt.resolve("/",s,t);return n?"".concat(n,":").concat(i):i}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[n,i]=this._driveForPath(e);return n.get(i,t).then((e=>{const t=[];if("directory"===e.type&&e.content){for(const i of e.content)t.push(s(s({},i),{},{path:this._toGlobalPath(n,i.path)}));return s(s({},e),{},{path:this._toGlobalPath(n,i),content:t,serverPath:e.path})}return s(s({},e),{},{path:this._toGlobalPath(n,i),serverPath:e.path})}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.path){const t=this.normalize(e.path),[n,i]=this._driveForPath(t);return n.newUntitled(s(s({},e),{},{path:i})).then((e=>s(s({},e),{},{path:a.PathExt.join(t,e.name),serverPath:e.path})))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(n!==r)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(i,o).then((e=>s(s({},e),{},{path:this._toGlobalPath(n,o),serverPath:e.path})))}save(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.normalize(e),[i,r]=this._driveForPath(e);return i.save(r,s(s({},t),{},{path:r})).then((e=>s(s({},e),{},{path:n,serverPath:e.path})))}copy(e,t){const[n,i]=this._driveForPath(e),[r,o]=this._driveForPath(t);if(n===r)return n.copy(i,o).then((e=>s(s({},e),{},{path:this._toGlobalPath(n,e.path),serverPath:e.path})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,s]=this._driveForPath(e);return n.restoreCheckpoint(s,t)}deleteCheckpoint(e,t){const[n,s]=this._driveForPath(e);return n.deleteCheckpoint(s,t)}_toGlobalPath(e,t){return e===this._defaultDrive?a.PathExt.removeSlash(t):"".concat(e.name,":").concat(a.PathExt.removeSlash(t))}_driveForPath(e){const t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,i;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let r=null,o=null;(null===(n=t.newValue)||void 0===n?void 0:n.path)&&(r=s(s({},t.newValue),{},{path:this._toGlobalPath(e,t.newValue.path)})),(null===(i=t.oldValue)||void 0===i?void 0:i.path)&&(o=s(s({},t.oldValue),{},{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:r,oldValue:o})}}};class Drive{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,s;this._isDisposed=!1,this._fileChanged=new l.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(s=e.serverSettings)&&void 0!==s?s:c.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,l.Signal.clearData(this))}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",i=s(s({},t),{},{content:e});n+=a.URLExt.objectToQueryString(i)}const i=this.serverSettings,r=await c.ServerConnection.makeRequest(n,{},i);if(200!==r.status){throw await c.ServerConnection.ResponseError.create(r)}const o=await r.json();return d.validateContentsModel(o),o}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=a.URLExt.join(t,"files",a.URLExt.encodeParts(e));const s=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(s){const e=new URL(n);e.searchParams.append("_xsrf",s[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;let n="{}";e&&(e.ext&&(e.ext=u.normalizeExtension(e.ext)),n=JSON.stringify(e));const s=this.serverSettings,i=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),r={method:"POST",body:n},o=await c.ServerConnection.makeRequest(i,r,s);if(201!==o.status){throw await c.ServerConnection.ResponseError.create(o)}const a=await o.json();return d.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async delete(e){const t=this._getUrl(e),n=this.serverSettings,s=await c.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==s.status){throw await c.ServerConnection.ResponseError.create(s)}this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const n=this.serverSettings,s=this._getUrl(e),i={method:"PATCH",body:JSON.stringify({path:t})},r=await c.ServerConnection.makeRequest(s,i,n);if(200!==r.status){throw await c.ServerConnection.ResponseError.create(r)}const o=await r.json();return d.validateContentsModel(o),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:o}),o}async save(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.serverSettings,s=this._getUrl(e),i={method:"PUT",body:JSON.stringify(t)},r=await c.ServerConnection.makeRequest(s,i,n);if(200!==r.status&&201!==r.status){throw await c.ServerConnection.ResponseError.create(r)}const o=await r.json();return d.validateContentsModel(o),this._fileChanged.emit({type:"save",oldValue:null,newValue:o}),o}async copy(e,t){const n=this.serverSettings,s=this._getUrl(t),i={method:"POST",body:JSON.stringify({copy_from:e})},r=await c.ServerConnection.makeRequest(s,i,n);if(201!==r.status){throw await c.ServerConnection.ResponseError.create(r)}const o=await r.json();return d.validateContentsModel(o),this._fileChanged.emit({type:"new",oldValue:null,newValue:o}),o}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),n=await c.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status){throw await c.ServerConnection.ResponseError.create(n)}const s=await n.json();return d.validateCheckpointModel(s),s}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),n=await c.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status){throw await c.ServerConnection.ResponseError.create(n)}const s=await n.json();if(!Array.isArray(s))throw new Error("Invalid Checkpoint list");for(let e=0;e<s.length;e++)d.validateCheckpointModel(s[e]);return s}async restoreCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),s=await c.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==s.status){throw await c.ServerConnection.ResponseError.create(s)}}async deleteCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),s=await c.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==s.status){throw await c.ServerConnection.ResponseError.create(s)}}_getUrl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.map((e=>a.URLExt.encodeParts(e))),i=this.serverSettings.baseUrl;return a.URLExt.join(i,this._apiEndpoint,...s)}}t.Drive=Drive,function(e){e.normalizeExtension=function normalizeExtension(e){return e.length>0&&0!==e.indexOf(".")&&(e=".".concat(e)),e}}(u||(u={}))},56730:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckpointModel=t.validateContentsModel=void 0;const s=n(76361);t.validateContentsModel=function validateContentsModel(e){(0,s.validateProperty)(e,"name","string"),(0,s.validateProperty)(e,"path","string"),(0,s.validateProperty)(e,"type","string"),(0,s.validateProperty)(e,"created","string"),(0,s.validateProperty)(e,"last_modified","string"),(0,s.validateProperty)(e,"mimetype","object"),(0,s.validateProperty)(e,"content","object"),(0,s.validateProperty)(e,"format","object")},t.validateCheckpointModel=function validateCheckpointModel(e){(0,s.validateProperty)(e,"id","string"),(0,s.validateProperty)(e,"last_modified","string")}},11136:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;const s=n(19430),i=n(18048),r=n(5233),o=n(10336),a="api/events";t.EventManager=class EventManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this._socket=null,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings(),this._poll=new i.Poll({factory:()=>this._subscribe()}),this._stream=new r.Stream(this),this._poll.start()}get isDisposed(){return this._poll.isDisposed}get stream(){return this._stream}dispose(){if(this.isDisposed)return;this._poll.dispose();const e=this._socket;e&&(this._socket=null,e.onopen=()=>{},e.onerror=()=>{},e.onmessage=()=>{},e.onclose=()=>{},e.close()),r.Signal.clearData(this),this._stream.stop()}async emit(e){const{serverSettings:t}=this,{baseUrl:n,token:i}=t,{makeRequest:r,ResponseError:l}=o.ServerConnection,c=s.URLExt.join(n,a)+(i?"?token=".concat(i):""),d={body:JSON.stringify(e),method:"POST"},u=await r(c,d,t);if(204!==u.status)throw new l(u)}_subscribe(){return new Promise(((e,t)=>{if(this.isDisposed)return;const{token:n,WebSocket:i,wsUrl:r}=this.serverSettings,o=s.URLExt.join(r,a,"subscribe")+(n?"?token=".concat(encodeURIComponent(n)):""),l=this._socket=new i(o),c=this._stream;l.onclose=()=>t(new Error("EventManager socket closed")),l.onmessage=e=>e.data&&c.emit(JSON.parse(e.data))}))}}},51:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(22787),t),i(n(30610),t),i(n(66414),t),i(n(11136),t),i(n(2213),t),i(n(52890),t),i(n(55332),t),i(n(10336),t),i(n(37660),t),i(n(9484),t),i(n(90792),t),i(n(45247),t),i(n(48493),t),i(n(99299),t)},84473:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommHandler=void 0;const o=n(27275),a=r(n(6989));class CommHandler extends o.DisposableDelegate{constructor(e,t,n,s){super(s),this._target="",this._id="",this._id=t,this._target=e,this._kernel=n}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const s=a.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(s,!1,!0)}send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const i=a.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,s)}close(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const s=a.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}),i=this._kernel.sendShellMessage(s,!1,!0),r=this._onClose;if(r){r(a.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}))}return this.dispose(),i}}t.CommHandler=CommHandler},32291:function(e,t,n){var s=n(12897).default,i=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const a=n(19430),l=n(93149),c=n(5233),d=n(51),u=n(84473),h=o(n(6989)),p=n(1470),_=n(48019),g=o(n(61511)),m=n(52890),f=o(n(49571)),v="_RESTARTING_";class KernelConnection{constructor(e){var t,n,s,i,r=this;this._createSocket=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r._errorIfDisposed(),r._clearSocket(),r._updateConnectionStatus("connecting");const t=r.serverSettings,n=a.URLExt.join(t.wsUrl,f.KERNEL_SERVICE_URL,encodeURIComponent(r._id)),s=n.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug("Starting WebSocket: ".concat(s));let i=a.URLExt.join(n,"channels?session_id="+encodeURIComponent(r._clientId));const o=t.token;t.appendToken&&""!==o&&(i+="&token=".concat(encodeURIComponent(o)));const l=e?r._supportedProtocols:[];r._ws=new t.WebSocket(i,l),r._ws.binaryType="arraybuffer";let c=!1;const getKernelModel=async e=>{var n,s;if(!r._isDisposed){r._reason="",r._model=void 0;try{const n=await f.getKernelModel(r._id,t);r._model=n,"dead"===(null==n?void 0:n.execution_state)?r._updateStatus("dead"):r._onWSClose(e)}catch(t){if(t instanceof d.ServerConnection.NetworkError||503===(null===(n=t.response)||void 0===n?void 0:n.status)||424===(null===(s=t.response)||void 0===s?void 0:s.status)){const t=1e3*y.getRandomIntInclusive(10,30);setTimeout(getKernelModel,t,e)}else r._reason="Kernel died unexpectedly",r._updateStatus("dead")}}},earlyClose=async e=>{c||(c=!0,await getKernelModel(e))};r._ws.onmessage=r._onWSMessage,r._ws.onopen=r._onWSOpen,r._ws.onclose=earlyClose,r._ws.onerror=earlyClose},this._onWSOpen=e=>{if(""!==this._ws.protocol&&!this._supportedProtocols.includes(this._ws.protocol))throw console.log("Server selected unknown kernel wire protocol:",this._ws.protocol),this._updateStatus("dead"),new Error("Unknown kernel wire protocol:  ".concat(this._ws.protocol));this._selectedProtocol=this._ws.protocol,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose,this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=(0,_.deserialize)(e.data,this._ws.protocol),g.validateMessage(t)}catch(e){throw e.message="Kernel message validation error: ".concat(e.message),e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._supportedProtocols=Object.values(h.supportedKernelWebSocketProtocols),this._selectedProtocol="",this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new l.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._pendingInput=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._hasPendingInput=!1,this._reason="",this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:d.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:l.UUID.uuid4(),this._username=null!==(s=e.username)&&void 0!==s?s:"",this.handleComms=null===(i=e.handleComms)||void 0===i||i,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return this._model||{id:this.id,name:this.name,reason:this._reason}}get anyMessage(){return this._anyMessage}get pendingInput(){return this._pendingInput}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=m.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new KernelConnection(s({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._sendKernelShellControl(p.KernelShellFutureHandler,e,t,n)}sendControlMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._sendKernelShellControl(p.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const i=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const s=n.indexOf(e);if(-1===s)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(s,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,s,this);return this._futures.set(t.header.msg_id,i),i}_sendMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===v)&&h.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send((0,_.serialize)(e,this._ws.protocol));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==v)this._ws.send((0,_.serialize)(e,this._ws.protocol));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if(this.hasPendingInput=!1,"dead"===this.status)throw new Error("Kernel is dead");return f.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=v,await f.restartKernel(this.id,this.serverSettings),await this.reconnect(),this.hasPendingInput=!1}reconnect(){this._errorIfDisposed();const e=new l.PromiseDelegate,fulfill=(t,n)=>{"connected"===n?(e.resolve(),this.connectionStatusChanged.disconnect(fulfill,this)):"disconnected"===n&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(fulfill,this))};return this.connectionStatusChanged.connect(fulfill,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await f.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=h.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await y.handleShellMessage(this,e)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=h.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestInspect(e){const t=h.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestHistory(e){const t=h.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestExecute(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=h.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:s(s({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(i,!0,t)}requestDebug(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=h.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=h.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestCommInfo(e){const t=h.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}sendInputReply(e,t){const n=h.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});n.parent_header=t,this._sendMessage(n),this._anyMessage.emit({msg:n,direction:"send"}),this.hasPendingInput=!1}createComm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.UUID.uuid4();if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new u.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const s=null===(n=this._futures)||void 0===n?void 0:n.get(e);s&&s.registerMessageHook(t)}removeMessageHook(e,t){var n;const s=null===(n=this._futures)||void 0===n?void 0:n.get(e);s&&s.removeMessageHook(t)}removeInputGuard(){this.hasPendingInput=!1}async _handleDisplayId(e,t){var n,s;const i=t.parent_header.msg_id;let r=this._displayIdToParentIds.get(e);if(r){const e={header:l.JSONExt.deepCopy(t.header),parent_header:l.JSONExt.deepCopy(t.parent_header),metadata:l.JSONExt.deepCopy(t.metadata),content:l.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(r.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;r=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===r.indexOf(i)&&r.push(i),this._displayIdToParentIds.set(e,r);const o=null!==(s=this._msgIdToDisplayIds.get(i))&&void 0!==s?s:[];return-1===o.indexOf(i)&&o.push(i),this._msgIdToDisplayIds.set(i,o),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,y.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==v&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error("Canceling handling of old message: ".concat(e.header.msg_type))}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new u.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const s=await y.loadObject(t.target_name,t.target_module,this._targetRegistry);await s(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const s=n.onClose;s&&await s(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const s=n.onMsg;s&&await s(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===v,t=this.requestKernelInfo(),n=!1,sendPendingOnce=()=>{n||(n=!0,e&&this._kernelSession===v&&(this._kernelSession=""),clearTimeout(s),this._pendingMessages.length>0&&this._sendPending())};t.then(sendPendingOnce);let s=setTimeout(sendPendingOnce,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let s=!1;if(e.parent_header&&"iopub"===e.channel&&(h.isDisplayDataMsg(e)||h.isUpdateDisplayDataMsg(e)||h.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(s=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!s&&e.parent_header){const t=e.parent_header,s=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(s)await s.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=y.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn("Connection lost, reconnecting in ".concat(Math.floor(e/1e3)," seconds."));const t=""!==this._selectedProtocol;this._reconnectTimeout=setTimeout(this._createSocket,e,t),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}get hasPendingInput(){return this._hasPendingInput}set hasPendingInput(e){this._hasPendingInput=e,this._pendingInput.emit(e)}}var y;t.KernelConnection=KernelConnection,function(e){e.logKernelStatus=function logKernelStatus(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug("Kernel: ".concat(e.status," (").concat(e.id,")"))}},e.handleShellMessage=async function handleShellMessage(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function loadObject(e,t,n){return new Promise(((s,i)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{if(void 0===n[e]){const n="Object '".concat(e,"' not found in module '").concat(t,"'");i(new Error(n))}else s(n[e])}),i)}else(null==n?void 0:n[e])?s(n[e]):i(new Error("Object '".concat(e,"' not found in registry")))}))},e.getRandomIntInclusive=function getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(y||(y={}))},1470:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelShellFutureHandler=t.KernelControlFutureHandler=t.KernelFutureHandler=void 0;const o=n(93149),a=n(27275),l=r(n(6989));class KernelFutureHandler extends a.DisposableDelegate{constructor(e,t,n,s,i){super(e),this._status=0,this._stdin=c.noOp,this._iopub=c.noOp,this._reply=c.noOp,this._done=new o.PromiseDelegate,this._hooks=new c.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(c.KernelFutureFlag.GotReply),this._disposeOnDone=s,this._kernel=i}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e,t){this._kernel.sendInputReply(e,t)}dispose(){this._stdin=c.noOp,this._iopub=c.noOp,this._reply=c.noOp,this._hooks=null,this._testFlag(c.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error("Canceled future for ".concat(this.msg.header.msg_type," message before replies were done")))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(c.KernelFutureFlag.GotReply),this._testFlag(c.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){this._kernel.hasPendingInput=!0;const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),l.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(c.KernelFutureFlag.GotIdle),this._testFlag(c.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(c.KernelFutureFlag.IsDone)||(this._setFlag(c.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return!!(this._status&e)}_setFlag(e){this._status|=e}}t.KernelFutureHandler=KernelFutureHandler;t.KernelControlFutureHandler=class KernelControlFutureHandler extends KernelFutureHandler{};var c;t.KernelShellFutureHandler=class KernelShellFutureHandler extends KernelFutureHandler{},function(e){e.noOp=()=>{};const t="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;let n;e.HookList=class HookList{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new o.PromiseDelegate;let n;this._processing=t.promise;for(let s=this._hooks.length-1;s>=0;s--){const i=this._hooks[s];if(null!==i){try{n=await i(e)}catch(e){n=!0,console.error(e)}if(!1===n)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){const n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},function(e){e[e.GotReply=1]="GotReply",e[e.GotIdle=2]="GotIdle",e[e.IsDone=4]="IsDone",e[e.DisposeOnDone=8]="DisposeOnDone"}(n=e.KernelFutureFlag||(e.KernelFutureFlag={}))}(c||(c={}))},2213:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=t.KernelAPI=t.KernelMessage=t.Kernel=void 0;const a=r(n(97860));t.Kernel=a;const l=r(n(6989));t.KernelMessage=l;const c=r(n(49571));t.KernelAPI=c;const d=n(32291);Object.defineProperty(t,"KernelConnection",{enumerable:!0,get:function(){return d.KernelConnection}}),o(n(9478),t)},97860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9478:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.KernelManager=void 0;const i=n(18048),r=n(5233),o=n(51),a=n(22787),l=n(49571),c=n(32291);class KernelManager extends a.BaseManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:n}=e.model;let i=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const e of this._kernelConnections)if(e.id===n&&e.handleComms){i=!1;break}const r=new c.KernelConnection(s(s({handleComms:i},e),{},{serverSettings:this.serverSettings}));return this._onStarted(r),this._models.has(n)||this.refreshRunning().catch((()=>{})),r}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await(0,l.startNew)(e,this.serverSettings);return this.connectTo(s(s({},t),{},{model:n}))}async shutdown(e){await(0,l.shutdownKernel)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>(0,l.shutdownKernel)(e,this.serverSettings)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await(0,l.listRunning)(this.serverSettings)}catch(n){throw(n instanceof o.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&n.every((e=>{const t=this._models.get(e.id);return!!t&&(t.connections===e.connections&&t.execution_state===e.execution_state&&t.last_activity===e.last_activity&&t.name===e.name&&t.reason===e.reason&&t.traceback===e.traceback)}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}}t.KernelManager=KernelManager,function(e){e.NoopManager=class NoopManager extends e{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}async startNew(){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}connectTo(e){throw new Error("Not implemented in no-op Kernel Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}get ready(){return this.parentReady.then((()=>this._readyPromise))}async requestRunning(){return Promise.resolve()}}}(KernelManager=t.KernelManager||(t.KernelManager={}))},6989:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.supportedKernelWebSocketProtocols=t.isInputReplyMsg=t.isInputRequestMsg=t.isDebugReplyMsg=t.isDebugRequestMsg=t.isExecuteReplyMsg=t.isInfoRequestMsg=t.isCommMsgMsg=t.isCommCloseMsg=t.isCommOpenMsg=t.isDebugEventMsg=t.isClearOutputMsg=t.isStatusMsg=t.isErrorMsg=t.isExecuteResultMsg=t.isExecuteInputMsg=t.isUpdateDisplayDataMsg=t.isDisplayDataMsg=t.isStreamMsg=t.createMessage=void 0;const s=n(93149);t.createMessage=function createMessage(e){var t,n,i,r,o;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:s.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(i=e.username)&&void 0!==i?i:"",version:"5.2"},metadata:null!==(r=e.metadata)&&void 0!==r?r:{},parent_header:null!==(o=e.parentHeader)&&void 0!==o?o:{}}},t.isStreamMsg=function isStreamMsg(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function isDisplayDataMsg(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function isUpdateDisplayDataMsg(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function isExecuteInputMsg(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function isExecuteResultMsg(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function isErrorMsg(e){return"error"===e.header.msg_type},t.isStatusMsg=function isStatusMsg(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function isClearOutputMsg(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function isDebugEventMsg(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function isCommOpenMsg(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function isCommCloseMsg(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function isCommMsgMsg(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function isInfoRequestMsg(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function isExecuteReplyMsg(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function isDebugRequestMsg(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function isDebugReplyMsg(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function isInputRequestMsg(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function isInputReplyMsg(e){return"input_reply"===e.header.msg_type},function(e){e.v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org"}(t.supportedKernelWebSocketProtocols||(t.supportedKernelWebSocketProtocols={}))},49571:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelModel=t.shutdownKernel=t.interruptKernel=t.restartKernel=t.startNew=t.listRunning=t.KERNEL_SERVICE_URL=void 0;const s=n(10336),i=n(19430),r=n(61511);t.KERNEL_SERVICE_URL="api/kernels",t.listRunning=async function listRunning(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.ServerConnection.makeSettings();const n=i.URLExt.join(e.baseUrl,t.KERNEL_SERVICE_URL),o=await s.ServerConnection.makeRequest(n,{},e);if(200!==o.status){throw await s.ServerConnection.ResponseError.create(o)}const a=await o.json();return(0,r.validateModels)(a),a},t.startNew=async function startNew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},l=await s.ServerConnection.makeRequest(o,a,n);if(201!==l.status){throw await s.ServerConnection.ResponseError.create(l)}const c=await l.json();return(0,r.validateModel)(c),c},t.restartKernel=async function restartKernel(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"restart"),a=await s.ServerConnection.makeRequest(o,{method:"POST"},n);if(200!==a.status){throw await s.ServerConnection.ResponseError.create(a)}const l=await a.json();(0,r.validateModel)(l)},t.interruptKernel=async function interruptKernel(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const r=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"interrupt"),o=await s.ServerConnection.makeRequest(r,{method:"POST"},n);if(204!==o.status){throw await s.ServerConnection.ResponseError.create(o)}},t.shutdownKernel=async function shutdownKernel(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const r=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),o=await s.ServerConnection.makeRequest(r,{method:"DELETE"},n);if(404===o.status){const t='The kernel "'.concat(e,'" does not exist on the server');console.warn(t)}else if(204!==o.status){throw await s.ServerConnection.ResponseError.create(o)}},t.getKernelModel=async function getKernelModel(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),a=await s.ServerConnection.makeRequest(o,{},n);if(404===a.status)return;if(200!==a.status){throw await s.ServerConnection.ResponseError.create(a)}const l=await a.json();return(0,r.validateModel)(l),l}},48019:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=t.serialize=void 0;const o=r(n(6989));var a;t.serialize=function serialize(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")===o.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?a.serializeV1KernelWebsocketJupyterOrg(e):a.serializeDefault(e)},t.deserialize=function deserialize(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")===o.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?a.deserializeV1KernelWebsocketJupyterOrg(e):a.deserializeDefault(e)},function(e){e.deserializeV1KernelWebsocketJupyterOrg=function deserializeV1KernelWebsocketJupyterOrg(e){let t;const n=new DataView(e),s=Number(n.getBigUint64(0,!0));let i=[];for(let e=0;e<s;e++)i.push(Number(n.getBigUint64(8*(e+1),!0)));const r=new TextDecoder("utf8"),o=r.decode(e.slice(i[0],i[1])),a=JSON.parse(r.decode(e.slice(i[1],i[2]))),l=JSON.parse(r.decode(e.slice(i[2],i[3]))),c=JSON.parse(r.decode(e.slice(i[3],i[4]))),d=JSON.parse(r.decode(e.slice(i[4],i[5])));let u=[];for(let t=5;t<i.length-1;t++)u.push(new DataView(e.slice(i[t],i[t+1])));return t={channel:o,header:a,parent_header:l,metadata:c,content:d,buffers:u},t},e.serializeV1KernelWebsocketJupyterOrg=function serializeV1KernelWebsocketJupyterOrg(e){const t=JSON.stringify(e.header),n=null==e.parent_header?"{}":JSON.stringify(e.parent_header),s=JSON.stringify(e.metadata),i=JSON.stringify(e.content),r=void 0!==e.buffers?e.buffers:[],o=5+r.length+1;let a=[];a.push(8*(1+o)),a.push(e.channel.length+a[a.length-1]);const l=new TextEncoder,c=l.encode(e.channel),d=l.encode(t),u=l.encode(n),h=l.encode(s),p=l.encode(i),_=new Uint8Array(c.length+d.length+u.length+h.length+p.length);_.set(c),_.set(d,c.length),_.set(u,c.length+d.length),_.set(h,c.length+d.length+u.length),_.set(p,c.length+d.length+u.length+h.length);for(let e of[d.length,u.length,h.length,p.length])a.push(e+a[a.length-1]);let g=0;for(let e of r){let t=e.byteLength;a.push(t+a[a.length-1]),g+=t}const m=new Uint8Array(8*(1+o)+_.byteLength+g),f=new ArrayBuffer(8),v=new DataView(f);v.setBigUint64(0,BigInt(o),!0),m.set(new Uint8Array(f),0);for(let e=0;e<a.length;e++)v.setBigUint64(0,BigInt(a[e]),!0),m.set(new Uint8Array(f),8*(e+1));m.set(_,a[0]);for(let e=0;e<r.length;e++){const t=r[e];m.set(new Uint8Array(ArrayBuffer.isView(t)?t.buffer:t),a[5+e])}return m.buffer},e.deserializeDefault=function deserializeDefault(e){let t;return t="string"==typeof e?JSON.parse(e):function deserializeBinary(e){const t=new DataView(e),n=t.getUint32(0),s=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)s.push(t.getUint32(4*e));const i=new Uint8Array(e.slice(s[0],s[1])),r=JSON.parse(new TextDecoder("utf8").decode(i));r.buffers=[];for(let t=1;t<n;t++){const n=s[t],i=s[t+1]||e.byteLength;r.buffers.push(new DataView(e.slice(n,i)))}return r}(e),t},e.serializeDefault=function serializeDefault(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function serializeBinary(e){const t=[],n=[],s=new TextEncoder;let i=[];void 0!==e.buffers&&(i=e.buffers,delete e.buffers);const r=s.encode(JSON.stringify(e));n.push(r.buffer);for(let e=0;e<i.length;e++){const t=i[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}const o=n.length;t.push(4*(o+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),l=new DataView(a.buffer);l.setUint32(0,o);for(let e=0;e<t.length;e++)l.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)a.set(new Uint8Array(n[e]),t[e]);return a.buffer}(e):JSON.stringify(e),n}}(a||(a={}))},61511:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.validateModel=t.validateMessage=void 0;const s=n(76361),i=["username","version","session","msg_id","msg_type"],r={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function validateModel(e){(0,s.validateProperty)(e,"name","string"),(0,s.validateProperty)(e,"id","string")}t.validateMessage=function validateMessage(e){(0,s.validateProperty)(e,"metadata","object"),(0,s.validateProperty)(e,"content","object"),(0,s.validateProperty)(e,"channel","string"),function validateHeader(e){for(let t=0;t<i.length;t++)(0,s.validateProperty)(e,i[t],"string")}(e.header),"iopub"===e.channel&&function validateIOPubContent(e){if("iopub"===e.channel){const t=r[e.header.msg_type];if(void 0===t)return;const n=Object.keys(t),i=e.content;for(let e=0;e<n.length;e++){let r=t[n[e]];Array.isArray(r)||(r=[r]),(0,s.validateProperty)(i,n[e],...r)}}}(e)},t.validateModel=validateModel,t.validateModels=function validateModels(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>validateModel(e)))}},52890:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecAPI=t.KernelSpec=void 0;const a=r(n(90302));t.KernelSpec=a;const l=r(n(48596));t.KernelSpecAPI=l,o(n(57029),t)},90302:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},57029:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecManager=void 0;const o=n(93149),a=n(18048),l=n(5233),c=r(n(48596)),d=n(22787);class KernelSpecManager extends d.BaseManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(e),this._isReady=!1,this._connectionFailure=new l.Signal(this),this._specs=null,this._specsChanged=new l.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new a.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const e=await c.getSpecs(this.serverSettings);this.isDisposed||o.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}}t.KernelSpecManager=KernelSpecManager},48596:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecs=void 0;const s=n(10336),i=n(85550),r=n(19430);t.getSpecs=async function getSpecs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.ServerConnection.makeSettings();const t=r.URLExt.join(e.baseUrl,"api/kernelspecs"),n=await s.ServerConnection.makeRequest(t,{},e);if(200!==n.status){throw await s.ServerConnection.ResponseError.create(n)}const o=await n.json();return(0,i.validateSpecModels)(o)}},85550:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateSpecModels=t.validateSpecModel=void 0;const s=n(76361);function validateSpecModel(e){const t=e.spec;if(!t)throw new Error("Invalid kernel spec");(0,s.validateProperty)(e,"name","string"),(0,s.validateProperty)(e,"resources","object"),(0,s.validateProperty)(t,"language","string"),(0,s.validateProperty)(t,"display_name","string"),(0,s.validateProperty)(t,"argv","array");let n=null;t.hasOwnProperty("metadata")&&((0,s.validateProperty)(t,"metadata","object"),n=t.metadata);let i=null;return t.hasOwnProperty("env")&&((0,s.validateProperty)(t,"env","object"),i=t.env),{name:e.name,resources:e.resources,language:t.language,display_name:t.display_name,argv:t.argv,metadata:n,env:i}}t.validateSpecModel=validateSpecModel,t.validateSpecModels=function validateSpecModels(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs);const n=Object.create(null);let s=e.default;for(let s=0;s<t.length;s++){const i=e.kernelspecs[t[s]];try{n[t[s]]=validateSpecModel(i)}catch(e){console.warn("Removing errant kernel spec: ".concat(t[s]))}}if(t=Object.keys(n),!t.length)throw new Error("No valid kernelspecs found");return s&&"string"==typeof s&&s in n||(s=t[0],console.warn("Default kernel not found, using '".concat(t[0],"'"))),{default:s,kernelspecs:n}}},55332:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(5233),r=n(79779),o=n(66414),a=n(11136),l=n(2213),c=n(52890),d=n(99299),u=n(10336),h=n(37660),p=n(9484),_=n(90792),g=n(45247),m=n(48493);t.ServiceManager=class ServiceManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n;this._isDisposed=!1,this._connectionFailure=new i.Signal(this),this._isReady=!1;const f=e.defaultDrive,v=null!==(t=e.serverSettings)&&void 0!==t?t:u.ServerConnection.makeSettings(),y={defaultDrive:f,serverSettings:v,standby:null!==(n=e.standby)&&void 0!==n?n:"when-hidden"};this.serverSettings=v,this.contents=e.contents||new o.ContentsManager(y),this.events=e.events||new a.EventManager(y),this.kernels=e.kernels||new l.KernelManager(y),this.sessions=e.sessions||new h.SessionManager(s(s({},y),{},{kernelManager:this.kernels})),this.settings=e.settings||new p.SettingManager(y),this.terminals=e.terminals||new _.TerminalManager(y),this.builder=e.builder||new r.BuildManager(y),this.workspaces=e.workspaces||new m.WorkspaceManager(y),this.nbconvert=e.nbconvert||new d.NbConvertManager(y),this.kernelspecs=e.kernelspecs||new c.KernelSpecManager(y),this.user=e.user||new g.UserManager(y),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const w=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&w.push(this.terminals.ready),this._readyPromise=Promise.all(w).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,i.Signal.clearData(this),this.contents.dispose(),this.events.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}},99299:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NbConvertManager=void 0;const s=n(19430),i=n(10336),r=n(93149);t.NbConvertManager=class NbConvertManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this._exportFormats=null,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}async fetchExportFormats(){this._requestingFormats=new r.PromiseDelegate,this._exportFormats=null;const e=this.serverSettings.baseUrl,t=s.URLExt.join(e,"api/nbconvert"),{serverSettings:n}=this,o=await i.ServerConnection.makeRequest(t,{},n);if(200!==o.status){throw await i.ServerConnection.ResponseError.create(o)}const a=await o.json(),l={};return Object.keys(a).forEach((function(e){const t=a[e].output_mimetype;l[e]={output_mimetype:t}})),this._exportFormats=l,this._requestingFormats.resolve(l),l}async getExportFormats(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._requestingFormats?this._requestingFormats.promise:e||!this._exportFormats?await this.fetchExportFormats():this._exportFormats}}},10336:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnection=void 0;const i=n(19430);let r;var o,a;r="undefined"==typeof window?n(21771):WebSocket,function(e){e.makeSettings=function makeSettings(e){return a.makeSettings(e)},e.makeRequest=function makeRequest(e,t,n){return a.handleRequest(e,t,n)};class ResponseError extends Error{static async create(e){try{const t=await e.json(),{message:n,traceback:s}=t;return s&&console.error(s),new ResponseError(e,null!=n?n:ResponseError._defaultMessage(e),null!=s?s:"")}catch(t){return console.debug(t),new ResponseError(e)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ResponseError._defaultMessage(e),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";super(t),this.response=e,this.traceback=n}static _defaultMessage(e){return"Invalid response: ".concat(e.status," ").concat(e.statusText)}}e.ResponseError=ResponseError;class NetworkError extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=NetworkError}(o=t.ServerConnection||(t.ServerConnection={})),function(e){e.makeSettings=function makeSettings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const n=i.PageConfig.getBaseUrl(),o=i.PageConfig.getWsUrl(),a=i.URLExt.normalize(e.baseUrl)||n;let l=e.wsUrl;return l||a!==n||(l=o),l||0!==a.indexOf("http")||(l="ws"+a.slice(4)),l=null!=l?l:o,s(s({init:{cache:"no-store",credentials:"same-origin"},fetch,Headers,Request,WebSocket:r,token:i.PageConfig.getToken(),appUrl:i.PageConfig.getOption("appUrl"),appendToken:"undefined"==typeof window||"undefined"!=typeof process&&void 0!==(null===(t=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JUPYTER_SERVER_HTTP_URL:"http://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_SERVER_WS_URL:"ws://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_TOKEN:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",REACT_APP_ENV:"development"})||void 0===t?void 0:t.JEST_WORKER_ID)||i.URLExt.getHostName(n)!==i.URLExt.getHostName(l)},e),{},{baseUrl:a,wsUrl:l})},e.handleRequest=function handleRequest(e,t,n){var i;if(0!==e.indexOf(n.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(i=t.cache)&&void 0!==i?i:n.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const r=new n.Request(e,s(s({},n.init),t));let a=!1;if(n.token&&(a=!0,r.headers.append("Authorization","token ".concat(n.token))),"undefined"!=typeof document&&(null===document||void 0===document?void 0:document.cookie)){const e=function getCookie(e){const t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return null==t?void 0:t[1]}("_xsrf");void 0!==e&&(a=!0,r.headers.append("X-XSRFToken",e))}return!r.headers.has("Content-Type")&&a&&r.headers.set("Content-Type","application/json"),n.fetch.call(null,r).catch((e=>{throw new o.NetworkError(e)}))}}(a||(a={}))},22533:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionConnection=void 0;const i=n(5233),r=n(51),o=n(82570),a=n(93149);t.SessionConnection=class SessionConnection{constructor(e){var t,n,s,o;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new i.Signal(this),this._kernelChanged=new i.Signal(this),this._statusChanged=new i.Signal(this),this._connectionStatusChanged=new i.Signal(this),this._pendingInput=new i.Signal(this),this._iopubMessage=new i.Signal(this),this._unhandledMessage=new i.Signal(this),this._anyMessage=new i.Signal(this),this._propertyChanged=new i.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(t=e.username)&&void 0!==t?t:"",this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(s=e.kernelConnectionOptions)&&void 0!==s?s:{},this.serverSettings=null!==(o=e.serverSettings)&&void 0!==o?o:r.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get pendingInput(){return this._pendingInput}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}i.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await(0,o.shutdownSession)(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel(s(s({},this._kernelConnectionOptions),{},{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.pendingInput.connect(this.onPendingInput,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onPendingInput(e,t){this._pendingInput.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await(0,o.updateSession)(s(s({},e),{},{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}},37660:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionAPI=t.Session=void 0;const a=r(n(19664));t.Session=a;const l=r(n(82570));t.SessionAPI=l,o(n(74831),t)},74831:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;const i=n(18048),r=n(5233),o=n(10336),a=n(22787),l=n(22533),c=n(82570);class SessionManager extends a.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._kernelManager.isActive&&await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new l.SessionConnection(s(s({},e),{},{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await(0,c.startSession)(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(s(s({},t),{},{model:n}))}async shutdown(e){await(0,c.shutdownSession)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>(0,c.shutdownSession)(e,this.serverSettings)))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await(0,c.listRunning)(this.serverSettings)).filter((t=>t.path===e));if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(e){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await(0,c.listRunning)(this.serverSettings)}catch(n){throw(n instanceof o.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&n.every((e=>{var t,n,s,i;const r=this._models.get(e.id);return!!r&&((null===(t=r.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(s=r.kernel)||void 0===s?void 0:s.name)===(null===(i=e.kernel)||void 0===i?void 0:i.name)&&r.name===e.name&&r.path===e.path&&r.type===e.type)}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}}t.SessionManager=SessionManager,function(e){e.NoopManager=class NoopManager extends e{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}async startNew(e){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}connectTo(e){throw Error("Not implemented in no-op Session Manager")}get ready(){return this.parentReady.then((()=>this._readyPromise))}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}async requestRunning(){return Promise.resolve()}}}(SessionManager=t.SessionManager||(t.SessionManager={}))},82570:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateSession=t.startSession=t.getSessionModel=t.shutdownSession=t.getSessionUrl=t.listRunning=t.SESSION_SERVICE_URL=void 0;const s=n(10336),i=n(19430),r=n(23868);function getSessionUrl(e,n){const s=i.URLExt.join(e,t.SESSION_SERVICE_URL),r=i.URLExt.join(s,n);if(!r.startsWith(s))throw new Error("Can only be used for services requests");return r}t.SESSION_SERVICE_URL="api/sessions",t.listRunning=async function listRunning(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.ServerConnection.makeSettings();const n=i.URLExt.join(e.baseUrl,t.SESSION_SERVICE_URL),o=await s.ServerConnection.makeRequest(n,{},e);if(200!==o.status){throw await s.ServerConnection.ResponseError.create(o)}const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach((e=>{(0,r.updateLegacySessionModel)(e),(0,r.validateModel)(e)})),a},t.getSessionUrl=getSessionUrl,t.shutdownSession=async function shutdownSession(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();var n;const i=getSessionUrl(t.baseUrl,e),r=await s.ServerConnection.makeRequest(i,{method:"DELETE"},t);if(404===r.status){const t=null!==(n=(await r.json()).message)&&void 0!==n?n:'The session "'.concat(e,'"" does not exist on the server');console.warn(t)}else{if(410===r.status)throw new s.ServerConnection.ResponseError(r,"The kernel was deleted but the session was not");if(204!==r.status){throw await s.ServerConnection.ResponseError.create(r)}}},t.getSessionModel=async function getSessionModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const n=getSessionUrl(t.baseUrl,e),i=await s.ServerConnection.makeRequest(n,{},t);if(200!==i.status){throw await s.ServerConnection.ResponseError.create(i)}const o=await i.json();return(0,r.updateLegacySessionModel)(o),(0,r.validateModel)(o),o},t.startSession=async function startSession(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const o=i.URLExt.join(n.baseUrl,t.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},l=await s.ServerConnection.makeRequest(o,a,n);if(201!==l.status){throw await s.ServerConnection.ResponseError.create(l)}const c=await l.json();return(0,r.updateLegacySessionModel)(c),(0,r.validateModel)(c),c},t.updateSession=async function updateSession(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ServerConnection.makeSettings();const n=getSessionUrl(t.baseUrl,e.id),i={method:"PATCH",body:JSON.stringify(e)},o=await s.ServerConnection.makeRequest(n,i,t);if(200!==o.status){throw await s.ServerConnection.ResponseError.create(o)}const a=await o.json();return(0,r.updateLegacySessionModel)(a),(0,r.validateModel)(a),a}},19664:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23868:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.updateLegacySessionModel=t.validateModel=void 0;const s=n(61511),i=n(76361);function validateModel(e){(0,i.validateProperty)(e,"id","string"),(0,i.validateProperty)(e,"type","string"),(0,i.validateProperty)(e,"name","string"),(0,i.validateProperty)(e,"path","string"),(0,i.validateProperty)(e,"kernel","object"),(0,s.validateModel)(e.kernel)}t.validateModel=validateModel,t.updateLegacySessionModel=function updateLegacySessionModel(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},t.validateModels=function validateModels(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>validateModel(e)))}},9484:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingManager=void 0;const s=n(19430),i=n(65470),r=n(10336);class SettingManager extends i.DataConnector{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:a}=r.ServerConnection,l=n+s,c=o.url(l,e),d=await i(c,{},t);if(200!==d.status){throw await a.create(d)}return d.json()}async list(e){var t,n,s,i;const{serverSettings:a}=this,{baseUrl:l,appUrl:c}=a,{makeRequest:d,ResponseError:u}=r.ServerConnection,h=l+c,p=o.url(h,"","ids"===e),_=await d(p,{},a);if(200!==_.status)throw new u(_);const g=await _.json(),m=null!==(n=null===(t=null==g?void 0:g.settings)||void 0===t?void 0:t.map((e=>e.id)))&&void 0!==n?n:[];let f=[];return e||(f=null!==(i=null===(s=null==g?void 0:g.settings)||void 0===s?void 0:s.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==i?i:[]),{ids:m,values:f}}async save(e,t){const{serverSettings:n}=this,{baseUrl:s,appUrl:i}=n,{makeRequest:a,ResponseError:l}=r.ServerConnection,c=s+i,d=o.url(c,e),u={body:JSON.stringify({raw:t}),method:"PUT"},h=await a(d,u,n);if(204!==h.status)throw new l(h)}}var o;t.SettingManager=SettingManager,function(e){e.url=function url(e,t,n){const i=n?s.URLExt.objectToQueryString({ids_only:!0}):"",r=s.URLExt.join(e,"api/settings"),o=s.URLExt.join(r,t);if(!o.startsWith(r))throw new Error("Can only be used for workspaces requests");return"".concat(o).concat(i)}}(o||(o={}))},21771:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=WebSocket},71017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalConnection=void 0;const s=n(19430),i=n(93149),r=n(5233),o=n(51),a=n(45198);class TerminalConnection{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this._name,t=this.serverSettings;let n=s.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e));const i=t.token;t.appendToken&&""!==i&&(n+="?token=".concat(encodeURIComponent(i))),this._ws=new t.WebSocket(n),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn("Terminal websocket closed: ".concat(e.code)),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new r.Signal(this),this._isDisposed=!1,this._disposed=new r.Signal(this),this._messageReceived=new r.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),r.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error("Could not send message: ".concat(JSON.stringify(e)));this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new i.PromiseDelegate,fulfill=(t,n)=>{"connected"===n?(e.resolve(),this.connectionStatusChanged.disconnect(fulfill,this)):"disconnected"===n&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(fulfill,this))};return this.connectionStatusChanged.connect(fulfill,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=l.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error("Connection lost, reconnecting in ".concat(Math.floor(e/1e3)," seconds.")),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await(0,a.shutdownTerminal)(this.name,this.serverSettings),this.dispose()}clone(){return new TerminalConnection(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var l;t.TerminalConnection=TerminalConnection,function(e){e.getTermUrl=function getTermUrl(e,t){return s.URLExt.join(e,a.TERMINAL_SERVICE_URL,encodeURIComponent(t))},e.getRandomIntInclusive=function getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(l||(l={}))},90792:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAPI=t.Terminal=void 0;const a=r(n(60810));t.Terminal=a;const l=r(n(45198));t.TerminalAPI=l,o(n(18435),t)},18435:(e,t,n)=>{var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(18048),r=n(5233),o=n(51),a=n(22787),l=n(45198),c=n(71017);class TerminalManager extends a.BaseManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return(0,l.isAvailable)()}connectTo(e){const t=new c.TerminalConnection(s(s({},e),{},{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return this._models[Symbol.iterator]()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e){const t=await(0,l.startNew)(this.serverSettings,null==e?void 0:e.name,null==e?void 0:e.cwd);return await this.refreshRunning(),this.connectTo({model:t})}async shutdown(e){await(0,l.shutdownTerminal)(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>(0,l.shutdownTerminal)(e,this.serverSettings)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await(0,l.listRunning)(this.serverSettings)}catch(n){throw(n instanceof o.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}if(this.isDisposed)return;const s=n.map((e=>{let{name:t}=e;return t})).sort();s!==this._names&&(this._names=s,this._terminalConnections.forEach((e=>{s.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}}t.TerminalManager=TerminalManager,function(e){e.NoopManager=class NoopManager extends e{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}get ready(){return this.parentReady.then((()=>this._readyPromise))}async startNew(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}connectTo(e){throw Error("Not implemented in no-op Terminal Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}async requestRunning(){return Promise.resolve()}}}(TerminalManager=t.TerminalManager||(t.TerminalManager={}))},45198:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownTerminal=t.listRunning=t.startNew=t.isAvailable=t.TERMINAL_SERVICE_URL=void 0;const s=n(19430),i=n(10336);function isAvailable(){return"true"===String(s.PageConfig.getOption("terminalsAvailable")).toLowerCase()}var r;t.TERMINAL_SERVICE_URL="api/terminals",t.isAvailable=isAvailable,t.startNew=async function startNew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ServerConnection.makeSettings(),n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;r.errorIfNotAvailable();const a=s.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),l={method:"POST",body:JSON.stringify({name:n,cwd:o})},c=await i.ServerConnection.makeRequest(a,l,e);if(200!==c.status){throw await i.ServerConnection.ResponseError.create(c)}return await c.json()},t.listRunning=async function listRunning(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ServerConnection.makeSettings();r.errorIfNotAvailable();const n=s.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await i.ServerConnection.makeRequest(n,{},e);if(200!==o.status){throw await i.ServerConnection.ResponseError.create(o)}const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid terminal list");return a},t.shutdownTerminal=async function shutdownTerminal(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ServerConnection.makeSettings();var o;r.errorIfNotAvailable();const a=s.URLExt.join(n.baseUrl,t.TERMINAL_SERVICE_URL),l=s.URLExt.join(a,e);if(!l.startsWith(a))throw new Error("Can only be used for terminal requests");const c=await i.ServerConnection.makeRequest(l,{method:"DELETE"},n);if(404===c.status){const t=null!==(o=(await c.json()).message)&&void 0!==o?o:'The terminal session "'.concat(e,'"" does not exist on the server');console.warn(t)}else if(204!==c.status){throw await i.ServerConnection.ResponseError.create(c)}},function(e){e.errorIfNotAvailable=function errorIfNotAvailable(){if(!isAvailable())throw new Error("Terminals Unavailable")}}(r||(r={}))},60810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAvailable=void 0;const s=n(45198);Object.defineProperty(t,"isAvailable",{enumerable:!0,get:function(){return s.isAvailable}})},45247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;const s=n(19430),i=n(93149),r=n(18048),o=n(5233),a=n(10336),l=n(22787),c="@jupyterlab/services:UserManager#user";class UserManager extends l.BaseManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(e),this._isReady=!1,this._userChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._ready=this.requestUser().then((()=>{this.isDisposed||(this._isReady=!0)})).catch((e=>new Promise((()=>{})))),this._pollSpecs=new r.Poll({auto:!1,factory:()=>this.requestUser(),frequency:{interval:61e3,backoff:!0,max:3e5},name:c,standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get identity(){return this._identity}get permissions(){return this._permissions}get userChanged(){return this._userChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshUser(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestUser(){if(this.isDisposed)return;const{baseUrl:e}=this.serverSettings,{makeRequest:t,ResponseError:n}=a.ServerConnection,r=s.URLExt.join(e,"api/me"),o=await t(r,{},this.serverSettings);if(200!==o.status){throw await n.create(o)}const l={identity:this._identity,permissions:this._permissions},u=await o.json(),h=u.identity,{localStorage:p}=window,_=p.getItem(c);if(_&&(!h.initials||!h.color)){const e=JSON.parse(_);h.initials=h.initials||e.initials||h.name.substring(0,1),h.color=h.color||e.color||d.getRandomColor()}i.JSONExt.deepEqual(u,l)||(this._identity=h,this._permissions=u.permissions,p.setItem(c,JSON.stringify(h)),this._userChanged.emit(u))}}var d;t.UserManager=UserManager,function(e){const t=["var(--jp-collaborator-color1)","var(--jp-collaborator-color2)","var(--jp-collaborator-color3)","var(--jp-collaborator-color4)","var(--jp-collaborator-color5)","var(--jp-collaborator-color6)","var(--jp-collaborator-color7)"];e.getRandomColor=()=>t[Math.floor(Math.random()*t.length)]}(d||(d={}))},76361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateProperty=void 0,t.validateProperty=function validateProperty(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e.hasOwnProperty(t))throw Error("Missing property '".concat(t,"'"));const i=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(i);break;case"object":e=void 0!==i;break;default:e=typeof i===n}if(!e)throw new Error("Property '".concat(t,"' is not of type '").concat(n,"'"));if(s.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=s.includes(i);break;default:e=s.findIndex((e=>e===i))>=0}if(!e)throw new Error("Property '".concat(t,"' is not one of the valid values ").concat(JSON.stringify(s)))}}}},48493:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const s=n(19430),i=n(65470),r=n(10336);class WorkspaceManager extends i.DataConnector{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:a}=r.ServerConnection,l=n+s,c=o.url(l,e),d=await i(c,{},t);if(200!==d.status){throw await a.create(d)}return d.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:n}=e,{makeRequest:s,ResponseError:i}=r.ServerConnection,a=t+n,l=o.url(a,""),c=await s(l,{},e);if(200!==c.status){throw await i.create(c)}return(await c.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:a}=r.ServerConnection,l=n+s,c=o.url(l,e),d=await i(c,{method:"DELETE"},t);if(204!==d.status){throw await a.create(d)}}async save(e,t){const{serverSettings:n}=this,{baseUrl:s,appUrl:i}=n,{makeRequest:a,ResponseError:l}=r.ServerConnection,c=s+i,d=o.url(c,e),u={body:JSON.stringify(t),method:"PUT"},h=await a(d,u,n);if(204!==h.status){throw await l.create(h)}}}var o;t.WorkspaceManager=WorkspaceManager,function(e){e.url=function url(e,t){const n=s.URLExt.join(e,"api/workspaces"),i=s.URLExt.join(n,t);if(!i.startsWith(n))throw new Error("Can only be used for workspaces requests");return i}}(o||(o={}))},77799:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const s=n(5233);t.ActivityMonitor=class ActivityMonitor{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new s.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,s.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},19430:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(77799),t),i(n(18364),t),i(n(86011),t),i(n(35314),t),i(n(55717),t),i(n(73519),t),i(n(78108),t),i(n(29775),t),i(n(47473),t),i(n(2191),t)},18364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},86011:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LruCache=void 0;t.LruCache=class LruCache{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._map=new Map,this._maxSize=(null==e?void 0:e.maxSize)||128}get size(){return this._map.size}clear(){this._map.clear()}get(e){const t=this._map.get(e)||null;return null!=t&&(this._map.delete(e),this._map.set(e,t)),t}set(e,t){this._map.size>=this._maxSize&&this._map.delete(this._map.keys().next().value),this._map.set(e,t)}}},35314:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class MarkdownCodeBlock{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=MarkdownCodeBlock,e.isMarkdown=function isMarkdown(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function findMarkdownCodeBlocks(t){if(!t||""===t)return[];const n=t.split("\n"),s=[];let i=null;for(let t=0;t<n.length;t++){const r=n[t],o=0===r.indexOf(e.CODE_BLOCK_MARKER),a=null!=i;if(o||a)if(a)i&&(o?(i.endLine=t-1,s.push(i),i=null):i.code+=r+"\n");else{i=new MarkdownCodeBlock(t);const n=r.indexOf(e.CODE_BLOCK_MARKER),o=r.lastIndexOf(e.CODE_BLOCK_MARKER);n!==o&&(i.code=r.substring(n+e.CODE_BLOCK_MARKER.length,o),i.endLine=t,s.push(i),i=null)}}return s}}(n||(t.MarkdownCodeBlocks=n={}))},55717:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(93149),minimist_1=__importDefault(__webpack_require__(16485)),url_1=__webpack_require__(2191);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&"undefined"!=typeof process&&process.argv)try{const cli=(0,minimist_1.default)(process.argv.slice(2)),path=__webpack_require__(3133);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JUPYTER_SERVER_HTTP_URL:"http://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_SERVER_WS_URL:"ws://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_TOKEN:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",REACT_APP_ENV:"development"}&&(fullPath=path.resolve({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JUPYTER_SERVER_HTTP_URL:"http://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_SERVER_WS_URL:"ws://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_TOKEN:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",REACT_APP_ENV:"development"}.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,s,i;let r=e.toShare?getShareUrl():getBaseUrl();const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),a=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),l="single-document"===o?"doc":"lab";r=url_1.URLExt.join(r,l),a!==PageConfig.defaultWorkspace&&(r=url_1.URLExt.join(r,"workspaces",encodeURIComponent(null!==(s=getOption("workspace"))&&void 0!==s?s:PageConfig.defaultWorkspace)));const c=null!==(i=e.treePath)&&void 0!==i?i:getOption("treePath");return c&&(r=url_1.URLExt.join(r,"tree",url_1.URLExt.encodeParts(c))),r}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL(e){let{path:t,format:n,download:s}=e;const i=url_1.URLExt.encodeParts(t),r=url_1.URLExt.join(getBaseUrl(),"nbconvert",n,i);return s?r+"?download=true":r}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function populate(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn("Unable to parse ".concat(e,"."),t)}return[]}e.deferred=populate("deferredExtensions"),e.disabled=populate("disabledExtensions"),e.isDeferred=function isDeferred(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.deferred.some((e=>e===t||s&&e===s))},e.isDisabled=function isDisabled(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.disabled.some((e=>e===t||s&&e===s))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig||(exports.PageConfig=PageConfig={}))},73519:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const s=n(3133);var i;!function(e){function removeSlash(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function join(){const e=s.posix.join(...arguments);return"."===e?"":removeSlash(e)},e.joinWithLeadingSlash=function joinWithLeadingSlash(){const e=s.posix.join(...arguments);return"."===e?"":e},e.basename=function basename(e,t){return s.posix.basename(e,t)},e.dirname=function dirname(e){const t=removeSlash(s.posix.dirname(e));return"."===t?"":t},e.extname=function extname(e){return s.posix.extname(e)},e.normalize=function normalize(e){return""===e?"":removeSlash(s.posix.normalize(e))},e.resolve=function resolve(){return removeSlash(s.posix.resolve(...arguments))},e.relative=function relative(e,t){return removeSlash(s.posix.relative(e,t))},e.normalizeExtension=function normalizeExtension(e){return e.length>0&&0!==e.indexOf(".")&&(e=".".concat(e)),e},e.removeSlash=removeSlash}(i||(t.PathExt=i={}))},78108:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signalToPromise=void 0;const s=n(93149);t.signalToPromise=function signalToPromise(e,t){const n=new s.PromiseDelegate;function cleanup(){e.disconnect(slot)}function slot(e,t){cleanup(),n.resolve([e,t])}return e.connect(slot),(null!=t?t:0)>0&&setTimeout((()=>{cleanup(),n.reject("Signal not emitted within ".concat(t," ms."))}),t),n.promise}},29775:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,function(e){e.jsIndexToCharIndex=function jsIndexToCharIndex(e,t){return e},e.charIndexToJsIndex=function charIndexToJsIndex(e,t){return e},e.camelCase=function camelCase(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,s){return s?s.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},e.titleCase=function titleCase(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}}(n||(t.Text=n={}))},47473:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const n=[{name:"years",milliseconds:31536e6},{name:"months",milliseconds:2592e6},{name:"days",milliseconds:864e5},{name:"hours",milliseconds:36e5},{name:"minutes",milliseconds:6e4},{name:"seconds",milliseconds:1e3}];var s;!function(e){e.formatHuman=function formatHuman(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";const s=document.documentElement.lang||"en",i=new Intl.RelativeTimeFormat(s,{numeric:"auto",style:t}),r=new Date(e).getTime()-Date.now();for(let e of n){const t=Math.ceil(r/e.milliseconds);if(0!==t)return i.format(t,e.name)}return i.format(0,"seconds")},e.format=function format(e){const t=document.documentElement.lang||"en";return new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"}).format(new Date(e))}}(s||(t.Time=s={}))},2191:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const i=n(3133),r=s(n(23134));var o;!function(e){function parse(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return(0,r.default)(e)}function join(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let s=(0,r.default)(t[0],{});const o=""===s.protocol&&s.slashes;o&&(s=(0,r.default)(t[0],"https:"+t[0]));const a="".concat(o?"":s.protocol).concat(s.slashes?"//":"").concat(s.auth).concat(s.auth?"@":"").concat(s.host),l=i.posix.join("".concat(a&&"/"!==s.pathname[0]?"/":"").concat(s.pathname),...t.slice(1));return"".concat(a).concat("."===l?"":l)}e.parse=parse,e.getHostName=function getHostName(e){return(0,r.default)(e).hostname},e.normalize=function normalize(e){return e&&parse(e).toString()},e.join=join,e.encodeParts=function encodeParts(e){return join(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function objectToQueryString(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function queryStringToObject(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,s]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(s||"")),e}),{})},e.isLocal=function isLocal(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{protocol:n}=parse(e);return(!n||0!==e.toLowerCase().indexOf(n))&&(t?0!==e.indexOf("//"):0!==e.indexOf("/"))}}(o||(t.URLExt=o={}))},17405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=void 0;t.DataConnector=class DataConnector{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}},65470:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17405),t),i(n(58452),t),i(n(45841),t),i(n(18605),t),i(n(13262),t)},58452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45841:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RestorablePool=void 0;const s=n(93149),i=n(93886),r=n(5233);var o;t.RestorablePool=class RestorablePool{constructor(e){this._added=new r.Signal(this),this._current=null,this._currentChanged=new r.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new s.PromiseDelegate,this._updated=new r.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,n;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!o.injectedProperty.get(e)){if(this._restore){const{connector:s}=this._restore,i=this._restore.name(e);if(i){const r="".concat(this.namespace,":").concat(i),a=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);o.nameProperty.set(e,r),await s.save(r,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),r.Signal.clearData(this))}find(e){const t=this._objects.values();for(const n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return o.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:n,registry:s,when:i}=e,r=this.namespace,o=i?[n.list(r)].concat(i):[n.list(r)];this._restore=e;const[a]=await Promise.all(o),l=await Promise.all(a.ids.map((async(e,i)=>{const r=a.values[i],o=r&&r.data;return void 0===o?n.remove(e):s.execute(t,o).catch((()=>n.remove(e)))})));return this._restored.resolve(),l}async save(e){var t,n;const s=o.injectedProperty.get(e);if(!this._restore||!this.has(e)||s)return;const{connector:i}=this._restore,r=this._restore.name(e),a=o.nameProperty.get(e),l=r?"".concat(this.namespace,":").concat(r):"";if(a&&a!==l&&await i.remove(a),o.nameProperty.set(e,l),l){const s=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);await i.save(l,{data:s})}a!==l&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),o.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,n=o.nameProperty.get(e);n&&t.remove(n)}},function(e){e.injectedProperty=new i.AttachedProperty({name:"injected",create:()=>!1}),e.nameProperty=new i.AttachedProperty({name:"name",create:()=>""})}(o||(o={}))},18605:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StateDB=void 0;const s=n(5233);class StateDB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._changed=new s.Signal(this);const{connector:t,transform:n}=e;this._connector=t||new StateDB.Connector,this._ready=n?n.then((e=>{const{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce(((t,n,s)=>(t[e[s]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}t.StateDB=StateDB,function(e){e.Connector=class Connector{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object.keys(this._storage).reduce(((t,n)=>(""!==e&&e!==n.split(":")[0]||(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}}(StateDB||(t.StateDB=StateDB={}))},13262:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IStateDB=void 0;const s=n(93149);t.IStateDB=new s.Token("@jupyterlab/coreutils:IStateDB",'A service for the JupyterLab state database.\n  Use this if you want to store data that will persist across page loads.\n  See "state database" for more information.')},10833:(e,t,n)=>{n.d(t,{PyodideKernel:()=>PyodideKernel});var s=n(93149),i=n(61624),r=n(51),o=n(5233);class BaseKernel{constructor(e){this._history=[],this._executionCount=0,this._isDisposed=!1,this._disposed=new o.Signal(this),this._parentHeader=void 0,this._parent=void 0;const{id:t,name:n,location:s,sendMessage:i}=e;this._id=t,this._name=n,this._location=s,this._sendMessage=i}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get id(){return this._id}get name(){return this._name}get location(){return this._location}get executionCount(){return this._executionCount}get parentHeader(){return this._parentHeader}get parent(){return this._parent}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0))}async handleMessage(e){this._busy(e),this._parent=e;switch(e.header.msg_type){case"kernel_info_request":await this._kernelInfo(e);break;case"execute_request":await this._execute(e);break;case"input_reply":this.inputReply(e.content);break;case"inspect_request":await this._inspect(e);break;case"is_complete_request":await this._isCompleteRequest(e);break;case"complete_request":await this._complete(e);break;case"history_request":await this._historyRequest(e);break;case"comm_open":await this.commOpen(e);break;case"comm_msg":await this.commMsg(e);break;case"comm_close":await this.commClose(e)}this._idle(e)}stream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"stream",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}displayData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n,s;const i=void 0!==t?t:this._parentHeader;e.metadata=null!==(n=e.metadata)&&void 0!==n?n:{};const o=r.KernelMessage.createMessage({channel:"iopub",msgType:"display_data",session:null!==(s=null==i?void 0:i.session)&&void 0!==s?s:"",parentHeader:i,content:e});this._sendMessage(o)}inputRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"stdin",msgType:"input_request",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}publishExecuteResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"execute_result",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}publishExecuteError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"error",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}updateDisplayData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"update_display_data",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}clearOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;var n;const s=void 0!==t?t:this._parentHeader,i=r.KernelMessage.createMessage({channel:"iopub",msgType:"clear_output",session:null!==(n=null==s?void 0:s.session)&&void 0!==n?n:"",parentHeader:s,content:e});this._sendMessage(i)}handleComm(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;var o;const a=void 0!==i?i:this._parentHeader,l=r.KernelMessage.createMessage({channel:"iopub",msgType:e,session:null!==(o=null==a?void 0:a.session)&&void 0!==o?o:"",parentHeader:a,content:t,metadata:n,buffers:s});this._sendMessage(l)}_idle(e){const t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"idle"}});this._sendMessage(t)}_busy(e){const t=r.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"busy"}});this._sendMessage(t)}async _kernelInfo(e){const t=await this.kernelInfoRequest(),n=r.KernelMessage.createMessage({msgType:"kernel_info_reply",channel:"shell",session:e.header.session,parentHeader:e.header,content:t});this._sendMessage(n)}async _historyRequest(e){const t=e,n=r.KernelMessage.createMessage({msgType:"history_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:{status:"ok",history:this._history}});this._sendMessage(n)}_executeInput(e){const t=e,n=t.content.code,s=r.KernelMessage.createMessage({msgType:"execute_input",parentHeader:t.header,channel:"iopub",session:e.header.session,content:{code:n,execution_count:this._executionCount}});this._sendMessage(s)}async _execute(e){const t=e,n=t.content;n.store_history&&this._executionCount++,this._parentHeader=t.header,this._executeInput(t),n.store_history&&this._history.push([0,0,n.code]);const s=await this.executeRequest(t.content),i=r.KernelMessage.createMessage({msgType:"execute_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:s});this._sendMessage(i)}async _complete(e){const t=e,n=await this.completeRequest(t.content),s=r.KernelMessage.createMessage({msgType:"complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}async _inspect(e){const t=e,n=await this.inspectRequest(t.content),s=r.KernelMessage.createMessage({msgType:"inspect_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}async _isCompleteRequest(e){const t=e,n=await this.isCompleteRequest(t.content),s=r.KernelMessage.createMessage({msgType:"is_complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:n});this._sendMessage(s)}}const a=Symbol("Comlink.proxy"),l=Symbol("Comlink.endpoint"),c=Symbol("Comlink.releaseProxy"),d=Symbol("Comlink.finalizer"),u=Symbol("Comlink.thrown"),isObject=e=>"object"==typeof e&&null!==e||"function"==typeof e,h=new Map([["proxy",{canHandle:e=>isObject(e)&&e[a],serialize(e){const{port1:t,port2:n}=new MessageChannel;return expose(e,t),[n,[n]]},deserialize:e=>(e.start(),wrap(e))}],["throw",{canHandle:e=>isObject(e)&&u in e,serialize(e){let t,{value:n}=e;return t=n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function expose(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function callback(s){if(!s||!s.data)return;if(!function isAllowedOrigin(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,s.origin))return void console.warn("Invalid origin '".concat(s.origin,"' for comlink proxy"));const{id:i,type:r,path:o}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(fromWireValue);let c;try{const t=o.slice(0,-1).reduce(((e,t)=>e[t]),e),n=o.reduce(((e,t)=>e[t]),e);switch(r){case"GET":c=n;break;case"SET":t[o.slice(-1)[0]]=fromWireValue(s.data.value),c=!0;break;case"APPLY":c=n.apply(t,l);break;case"CONSTRUCT":c=function proxy(e){return Object.assign(e,{[a]:!0})}(new n(...l));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;expose(e,n),c=function transfer(e,t){return g.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(e){c={value:e,[u]:0}}Promise.resolve(c).catch((e=>({value:e,[u]:0}))).then((n=>{const[s,o]=toWireValue(n);t.postMessage(Object.assign(Object.assign({},s),{id:i}),o),"RELEASE"===r&&(t.removeEventListener("message",callback),closeEndPoint(t),d in e&&"function"==typeof e[d]&&e[d]())})).catch((e=>{const[n,s]=toWireValue({value:new TypeError("Unserializable return value"),[u]:0});t.postMessage(Object.assign(Object.assign({},n),{id:i}),s)}))})),t.start&&t.start()}function closeEndPoint(e){(function isMessagePort(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function wrap(e,t){const n=new Map;return e.addEventListener("message",(function handleMessage(e){const{data:t}=e;if(!t||!t.id)return;const s=n.get(t.id);if(s)try{s(t)}finally{n.delete(t.id)}})),createProxy(e,n,[],t)}function throwIfProxyReleased(e){if(e)throw new Error("Proxy has been released and is not useable")}function releaseEndpoint(e){return requestResponseMessage(e,new Map,{type:"RELEASE"}).then((()=>{closeEndPoint(e)}))}const p=new WeakMap,_="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(p.get(e)||0)-1;p.set(e,t),0===t&&releaseEndpoint(e)}));function createProxy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=!1;const i=new Proxy(arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},{get(r,o){if(throwIfProxyReleased(s),o===c)return()=>{!function unregisterProxy(e){_&&_.unregister(e)}(i),releaseEndpoint(e),t.clear(),s=!0};if("then"===o){if(0===n.length)return{then:()=>i};const s=requestResponseMessage(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(fromWireValue);return s.then.bind(s)}return createProxy(e,t,[...n,o])},set(i,r,o){throwIfProxyReleased(s);const[a,l]=toWireValue(o);return requestResponseMessage(e,t,{type:"SET",path:[...n,r].map((e=>e.toString())),value:a},l).then(fromWireValue)},apply(i,r,o){throwIfProxyReleased(s);const a=n[n.length-1];if(a===l)return requestResponseMessage(e,t,{type:"ENDPOINT"}).then(fromWireValue);if("bind"===a)return createProxy(e,t,n.slice(0,-1));const[c,d]=processArguments(o);return requestResponseMessage(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:c},d).then(fromWireValue)},construct(i,r){throwIfProxyReleased(s);const[o,a]=processArguments(r);return requestResponseMessage(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:o},a).then(fromWireValue)}});return function registerProxy(e,t){const n=(p.get(t)||0)+1;p.set(t,n),_&&_.register(e,t,e)}(i,e),i}function processArguments(e){const t=e.map(toWireValue);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const g=new WeakMap;function toWireValue(e){for(const[t,n]of h)if(n.canHandle(e)){const[s,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:s},i]}return[{type:"RAW",value:e},g.get(e)||[]]}function fromWireValue(e){switch(e.type){case"HANDLER":return h.get(e.name).deserialize(e.value);case"RAW":return e.value}}function requestResponseMessage(e,t,n,s){return new Promise((i=>{const r=function generateUUID(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}();t.set(r,i),e.start&&e.start(),e.postMessage(Object.assign({id:r},n),s)}))}const m=JSON.parse('{"ipykernel":{"releases":{"6.9.2":[{"comment_text":"","digests":{"md5":"ba0144722ee1846c1af6c08126e66cdb","sha256":"714e5e132b36a60608d4617f24507e7f673bc1c6e6d2ad352271d664751f652c"},"downloads":-1,"filename":"ipykernel-6.9.2-py3-none-any.whl","has_sig":false,"md5_digest":"ba0144722ee1846c1af6c08126e66cdb","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.10","size":2721,"upload_time":"2024-02-12T07:37:02.122731Z","upload_time_iso_8601":"2024-02-12T07:37:02.122731Z","url":"./ipykernel-6.9.2-py3-none-any.whl","yanked":false,"yanked_reason":null}]}},"piplite":{"releases":{"0.2.3":[{"comment_text":"","digests":{"md5":"20f73f91854fd5f455234e5599c8a472","sha256":"723f8b4b5bb351b21c3ef655ec31b90d7d30cd59849993fcbb16feb6ce65cd0e"},"downloads":-1,"filename":"piplite-0.2.3-py3-none-any.whl","has_sig":false,"md5_digest":"20f73f91854fd5f455234e5599c8a472","packagetype":"bdist_wheel","python_version":"py3","requires_python":"<3.12,>=3.11","size":7155,"upload_time":"2024-02-12T07:37:02.122731Z","upload_time_iso_8601":"2024-02-12T07:37:02.122731Z","url":"./piplite-0.2.3-py3-none-any.whl","yanked":false,"yanked_reason":null}]}},"pyodide-kernel":{"releases":{"0.2.3":[{"comment_text":"","digests":{"md5":"82ac549fa1f425c37c9aac11ea135dd9","sha256":"db3056e26ae80d16d9e2beb684a0bc8c089be85379f7f5cf1761fe9d60ce7172"},"downloads":-1,"filename":"pyodide_kernel-0.2.3-py3-none-any.whl","has_sig":false,"md5_digest":"82ac549fa1f425c37c9aac11ea135dd9","packagetype":"bdist_wheel","python_version":"py3","requires_python":"<3.12,>=3.11","size":10995,"upload_time":"2024-02-12T07:37:02.122731Z","upload_time_iso_8601":"2024-02-12T07:37:02.122731Z","url":"./pyodide_kernel-0.2.3-py3-none-any.whl","yanked":false,"yanked_reason":null}]}},"widgetsnbextension":{"releases":{"3.6.6":[{"comment_text":"","digests":{"md5":"bf31ae77affa0ded09d057bcd7513609","sha256":"31a1d4a900178d14de10ebb6f352275e31c23910da24b7102970e3323fba1fba"},"downloads":-1,"filename":"widgetsnbextension-3.6.6-py3-none-any.whl","has_sig":false,"md5_digest":"bf31ae77affa0ded09d057bcd7513609","packagetype":"bdist_wheel","python_version":"py3","requires_python":"<3.12,>=3.11","size":2333,"upload_time":"2024-02-12T07:37:02.122731Z","upload_time_iso_8601":"2024-02-12T07:37:02.122731Z","url":"./widgetsnbextension-3.6.6-py3-none-any.whl","yanked":false,"yanked_reason":null}],"4.0.10":[{"comment_text":"","digests":{"md5":"d1e589ec381fd5719e3c15a382d230ca","sha256":"fb75b104e76c052e567d75523a55d7b1da05a017cd03f6bce6cc1c0bba9c1e9b"},"downloads":-1,"filename":"widgetsnbextension-4.0.10-py3-none-any.whl","has_sig":false,"md5_digest":"d1e589ec381fd5719e3c15a382d230ca","packagetype":"bdist_wheel","python_version":"py3","requires_python":"<3.12,>=3.11","size":2344,"upload_time":"2024-02-12T07:37:02.122731Z","upload_time_iso_8601":"2024-02-12T07:37:02.122731Z","url":"./widgetsnbextension-4.0.10-py3-none-any.whl","yanked":false,"yanked_reason":null}]}}}'),f=n.p+"static/media/piplite-0.2.3-py3-none-any.0d6d109ddc5743933a89.whl";class PyodideKernel extends BaseKernel{constructor(e){super(e),this._ready=new s.PromiseDelegate,this._worker=this.initWorker(e),this._worker.onmessage=e=>this._processWorkerMessage(e.data),this._remoteKernel=wrap(this._worker),this.initRemote(e)}initWorker(e){return new Worker(new URL(n.p+n.u(7230),n.b),{type:void 0})}async initRemote(e){const t=this.initRemoteOptions(e);await this._remoteKernel.initialize(t),this._ready.resolve()}initRemoteOptions(e){const{pyodideUrl:t}=e,n=t.slice(0,t.lastIndexOf("/")+1),s=i.PageConfig.getBaseUrl(),r=[...e.pipliteUrls||[],m],o=!!e.disablePyPIFallback;return{baseUrl:s,pyodideUrl:t,indexUrl:n,pipliteWheelUrl:e.pipliteWheelUrl||f,pipliteUrls:r,disablePyPIFallback:o,location:this.location,mountDrive:e.mountDrive}}dispose(){this.isDisposed||(this._worker.terminate(),this._worker=null,super.dispose())}get ready(){return this._ready.promise}_processWorkerMessage(e){var t,n,s,i,r,o,a;if(e.type)switch(e.type){case"stream":{const n=null!==(t=e.bundle)&&void 0!==t?t:{name:"stdout",text:""};this.stream(n,e.parentHeader);break}case"input_request":{const t=null!==(n=e.content)&&void 0!==n?n:{prompt:"",password:!1};this.inputRequest(t,e.parentHeader);break}case"display_data":{const t=null!==(s=e.bundle)&&void 0!==s?s:{data:{},metadata:{},transient:{}};this.displayData(t,e.parentHeader);break}case"update_display_data":{const t=null!==(i=e.bundle)&&void 0!==i?i:{data:{},metadata:{},transient:{}};this.updateDisplayData(t,e.parentHeader);break}case"clear_output":{const t=null!==(r=e.bundle)&&void 0!==r?r:{wait:!1};this.clearOutput(t,e.parentHeader);break}case"execute_result":{const t=null!==(o=e.bundle)&&void 0!==o?o:{execution_count:0,data:{},metadata:{}};this.publishExecuteResult(t,e.parentHeader);break}case"execute_error":{const t=null!==(a=e.bundle)&&void 0!==a?a:{ename:"",evalue:"",traceback:[]};this.publishExecuteError(t,e.parentHeader);break}case"comm_msg":case"comm_open":case"comm_close":this.handleComm(e.type,e.content,e.metadata,e.buffers,e.parentHeader)}}async kernelInfoRequest(){return{implementation:"pyodide",implementation_version:"0.1.0",language_info:{codemirror_mode:{name:"python",version:3},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:"ipython3",version:"3.8"},protocol_version:"5.3",status:"ok",banner:"A WebAssembly-powered Python kernel backed by Pyodide",help_links:[{text:"Python (WASM) Kernel",url:"https://pyodide.org"}]}}async executeRequest(e){await this.ready;const t=await this._remoteKernel.execute(e,this.parent);return t.execution_count=this.executionCount,t}async completeRequest(e){return await this._remoteKernel.complete(e,this.parent)}async inspectRequest(e){return await this._remoteKernel.inspect(e,this.parent)}async isCompleteRequest(e){return await this._remoteKernel.isComplete(e,this.parent)}async commInfoRequest(e){return await this._remoteKernel.commInfo(e,this.parent)}async commOpen(e){return await this._remoteKernel.commOpen(e,this.parent)}async commMsg(e){return await this._remoteKernel.commMsg(e,this.parent)}async commClose(e){return await this._remoteKernel.commClose(e,this.parent)}async inputReply(e){return await this._remoteKernel.inputReply(e,this.parent)}}},31957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const s=n(5233);t.ActivityMonitor=class ActivityMonitor{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new s.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,s.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},61624:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31957),t),i(n(70194),t),i(n(173),t),i(n(68780),t),i(n(15847),t),i(n(34097),t),i(n(57170),t),i(n(71913),t),i(n(52363),t),i(n(16153),t)},70194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},173:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LruCache=void 0;t.LruCache=class LruCache{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._map=new Map,this._maxSize=(null==e?void 0:e.maxSize)||128}get size(){return this._map.size}clear(){this._map.clear()}get(e){const t=this._map.get(e)||null;return null!=t&&(this._map.delete(e),this._map.set(e,t)),t}set(e,t){this._map.size>=this._maxSize&&this._map.delete(this._map.keys().next().value),this._map.set(e,t)}}},68780:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class MarkdownCodeBlock{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=MarkdownCodeBlock,e.isMarkdown=function isMarkdown(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function findMarkdownCodeBlocks(t){if(!t||""===t)return[];const n=t.split("\n"),s=[];let i=null;for(let t=0;t<n.length;t++){const r=n[t],o=0===r.indexOf(e.CODE_BLOCK_MARKER),a=null!=i;if(o||a)if(a)i&&(o?(i.endLine=t-1,s.push(i),i=null):i.code+=r+"\n");else{i=new MarkdownCodeBlock(t);const n=r.indexOf(e.CODE_BLOCK_MARKER),o=r.lastIndexOf(e.CODE_BLOCK_MARKER);n!==o&&(i.code=r.substring(n+e.CODE_BLOCK_MARKER.length,o),i.endLine=t,s.push(i),i=null)}}return s}}(n||(t.MarkdownCodeBlocks=n={}))},15847:function(__unused_webpack_module,exports,__webpack_require__){var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(93149),minimist_1=__importDefault(__webpack_require__(16485)),url_1=__webpack_require__(16153);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&"undefined"!=typeof process&&process.argv)try{const cli=(0,minimist_1.default)(process.argv.slice(2)),path=__webpack_require__(3133);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JUPYTER_SERVER_HTTP_URL:"http://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_SERVER_WS_URL:"ws://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_TOKEN:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",REACT_APP_ENV:"development"}&&(fullPath=path.resolve({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JUPYTER_SERVER_HTTP_URL:"http://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_SERVER_WS_URL:"ws://121.184.63.113:8686/api/jupyter-server",REACT_APP_JUPYTER_TOKEN:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",REACT_APP_ENV:"development"}.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,s,i;let r=e.toShare?getShareUrl():getBaseUrl();const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),a=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),l="single-document"===o?"doc":"lab";r=url_1.URLExt.join(r,l),a!==PageConfig.defaultWorkspace&&(r=url_1.URLExt.join(r,"workspaces",encodeURIComponent(null!==(s=getOption("workspace"))&&void 0!==s?s:PageConfig.defaultWorkspace)));const c=null!==(i=e.treePath)&&void 0!==i?i:getOption("treePath");return c&&(r=url_1.URLExt.join(r,"tree",url_1.URLExt.encodeParts(c))),r}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL(e){let{path:t,format:n,download:s}=e;const i=url_1.URLExt.encodeParts(t),r=url_1.URLExt.join(getBaseUrl(),"nbconvert",n,i);return s?r+"?download=true":r}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function populate(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn("Unable to parse ".concat(e,"."),t)}return[]}e.deferred=populate("deferredExtensions"),e.disabled=populate("disabledExtensions"),e.isDeferred=function isDeferred(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.deferred.some((e=>e===t||s&&e===s))},e.isDisabled=function isDisabled(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.disabled.some((e=>e===t||s&&e===s))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig||(exports.PageConfig=PageConfig={}))},34097:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const s=n(3133);var i;!function(e){function removeSlash(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function join(){const e=s.posix.join(...arguments);return"."===e?"":removeSlash(e)},e.joinWithLeadingSlash=function joinWithLeadingSlash(){const e=s.posix.join(...arguments);return"."===e?"":e},e.basename=function basename(e,t){return s.posix.basename(e,t)},e.dirname=function dirname(e){const t=removeSlash(s.posix.dirname(e));return"."===t?"":t},e.extname=function extname(e){return s.posix.extname(e)},e.normalize=function normalize(e){return""===e?"":removeSlash(s.posix.normalize(e))},e.resolve=function resolve(){return removeSlash(s.posix.resolve(...arguments))},e.relative=function relative(e,t){return removeSlash(s.posix.relative(e,t))},e.normalizeExtension=function normalizeExtension(e){return e.length>0&&0!==e.indexOf(".")&&(e=".".concat(e)),e},e.removeSlash=removeSlash}(i||(t.PathExt=i={}))},57170:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signalToPromise=void 0;const s=n(93149);t.signalToPromise=function signalToPromise(e,t){const n=new s.PromiseDelegate;function cleanup(){e.disconnect(slot)}function slot(e,t){cleanup(),n.resolve([e,t])}return e.connect(slot),(null!=t?t:0)>0&&setTimeout((()=>{cleanup(),n.reject("Signal not emitted within ".concat(t," ms."))}),t),n.promise}},71913:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,function(e){e.jsIndexToCharIndex=function jsIndexToCharIndex(e,t){return e},e.charIndexToJsIndex=function charIndexToJsIndex(e,t){return e},e.camelCase=function camelCase(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,s){return s?s.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},e.titleCase=function titleCase(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}}(n||(t.Text=n={}))},52363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const n=[{name:"years",milliseconds:31536e6},{name:"months",milliseconds:2592e6},{name:"days",milliseconds:864e5},{name:"hours",milliseconds:36e5},{name:"minutes",milliseconds:6e4},{name:"seconds",milliseconds:1e3}];var s;!function(e){e.formatHuman=function formatHuman(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";const s=document.documentElement.lang||"en",i=new Intl.RelativeTimeFormat(s,{numeric:"auto",style:t}),r=new Date(e).getTime()-Date.now();for(let e of n){const t=Math.ceil(r/e.milliseconds);if(0!==t)return i.format(t,e.name)}return i.format(0,"seconds")},e.format=function format(e){const t=document.documentElement.lang||"en";return new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"}).format(new Date(e))}}(s||(t.Time=s={}))},16153:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const i=n(3133),r=s(n(23134));var o;!function(e){function parse(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return(0,r.default)(e)}function join(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let s=(0,r.default)(t[0],{});const o=""===s.protocol&&s.slashes;o&&(s=(0,r.default)(t[0],"https:"+t[0]));const a="".concat(o?"":s.protocol).concat(s.slashes?"//":"").concat(s.auth).concat(s.auth?"@":"").concat(s.host),l=i.posix.join("".concat(a&&"/"!==s.pathname[0]?"/":"").concat(s.pathname),...t.slice(1));return"".concat(a).concat("."===l?"":l)}e.parse=parse,e.getHostName=function getHostName(e){return(0,r.default)(e).hostname},e.normalize=function normalize(e){return e&&parse(e).toString()},e.join=join,e.encodeParts=function encodeParts(e){return join(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function objectToQueryString(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function queryStringToObject(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,s]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(s||"")),e}),{})},e.isLocal=function isLocal(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{protocol:n}=parse(e);return(!n||0!==e.toLowerCase().indexOf(n))&&(t?0!==e.indexOf("//"):0!==e.indexOf("/"))}}(o||(t.URLExt=o={}))}}]);